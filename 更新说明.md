# ğŸ”„ é¡¹ç›®æ›´æ–°è¯´æ˜

## âœ… æœ€æ–°æ›´æ–°ï¼ˆ2025-11-13ï¼‰

### 1. ç™»å½•æ–¹å¼æ”¹ä¸ºé‚®ç®±éªŒè¯ç 
- âœ… å‰ç«¯ï¼šæ‰‹æœºå·è¾“å…¥æ”¹ä¸ºé‚®ç®±è¾“å…¥
- âœ… åç«¯ï¼šéªŒè¯ç å‘é€æ”¹ä¸ºé‚®ç®±
- âœ… æ•°æ®åº“ï¼šUser æ¨¡å‹ä» `phoneNumber` æ”¹ä¸º `email`
- âœ… éªŒè¯ï¼šæ·»åŠ é‚®ç®±æ ¼å¼éªŒè¯

### 2. å“åº”å¼è®¾è®¡ä¼˜åŒ–
- âœ… ç§»åŠ¨ç«¯ï¼šå…¨å±æ˜¾ç¤ºï¼Œå®Œç¾é€‚é…
- âœ… å¹³æ¿/PCï¼šå±…ä¸­æ˜¾ç¤ºï¼Œæœ€å¤§å®½åº¦ 480px
- âœ… å¤§å±å¹•ï¼šæœ€å¤§å®½åº¦ 520px
- âœ… æ·»åŠ å¹³æ»‘æ»šåŠ¨å’Œè‡ªå®šä¹‰æ»šåŠ¨æ¡

### 3. Canvas ä¾èµ–é—®é¢˜ä¿®å¤
- âœ… ç§»é™¤ `canvas` npm åŒ…
- âœ… ä½¿ç”¨ SVG ç”Ÿæˆå¤´åƒ
- âœ… æ— éœ€ç³»ç»Ÿä¾èµ–ï¼Œè·¨å¹³å°å…¼å®¹

---

## ğŸ“‹ æ›´æ–°çš„æ–‡ä»¶æ¸…å•

### å‰ç«¯æ–‡ä»¶ï¼ˆ9ä¸ªï¼‰

1. **client/src/locales/en.json**
   - `phoneNumber` â†’ `email`
   - `enterPhone` â†’ `enterEmail`
   - æ›´æ–°éªŒè¯ç å‘é€æç¤º

2. **client/src/locales/zh.json**
   - åŒä¸Šï¼Œä¸­æ–‡ç‰ˆæœ¬

3. **client/src/views/AuthView.vue**
   - è¾“å…¥æ¡†ç±»å‹ï¼š`tel` â†’ `email`
   - å˜é‡åï¼š`phoneNumber` â†’ `email`
   - æ·»åŠ é‚®ç®±æ ¼å¼éªŒè¯

4. **client/src/api/auth.ts**
   - æ¥å£å‚æ•°ï¼š`phoneNumber` â†’ `email`
   - TypeScript ç±»å‹æ›´æ–°

5. **client/src/stores/user.ts**
   - User æ¥å£ï¼š`phoneNumber` â†’ `email`

6. **client/src/views/ProfileView.vue**
   - æ˜¾ç¤ºé‚®ç®±è€Œä¸æ˜¯æ‰‹æœºå·

7. **client/src/style.css**
   - ä¼˜åŒ–å“åº”å¼å¸ƒå±€
   - æ·»åŠ  PC ç«¯æ ·å¼
   - è‡ªå®šä¹‰æ»šåŠ¨æ¡

### åç«¯æ–‡ä»¶ï¼ˆ5ä¸ªï¼‰

8. **server/src/types/index.ts**
   - User æ¥å£ï¼š`phoneNumber` â†’ `email`
   - VerificationCode æ¥å£æ›´æ–°

9. **server/src/utils/database.ts**
   - `findUserByPhone` â†’ `findUserByEmail`

10. **server/src/routes/auth.ts**
    - æ¥æ”¶ `email` å‚æ•°
    - æ·»åŠ é‚®ç®±æ ¼å¼éªŒè¯
    - æ›´æ–°æ—¥å¿—è¾“å‡ºæ ¼å¼

11. **server/src/utils/avatarGenerator.ts**
    - Canvas â†’ SVG ç”Ÿæˆ

12. **server/package.json**
    - ç§»é™¤ `canvas` ä¾èµ–

13. **server/Dockerfile**
    - ç§»é™¤ Cairo ç­‰ç³»ç»Ÿä¾èµ–

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### é¦–æ¬¡å®‰è£…ï¼ˆæƒé™é—®é¢˜å·²ä¿®å¤ï¼‰

```bash
cd chiavow

# æ–¹å¼1ï¼šæ‰‹åŠ¨æ¸…ç†å¹¶å®‰è£…
cd client
sudo rm -rf node_modules package-lock.json
npm install

cd ../server
npm install

# æ–¹å¼2ï¼šä½¿ç”¨å®‰è£…è„šæœ¬ï¼ˆå¦‚æœæƒé™ä¿®å¤åï¼‰
chmod +x install.sh
./install.sh
```

### å¯åŠ¨åº”ç”¨

**ç»ˆç«¯ 1 - åç«¯ï¼š**
```bash
cd chiavow/server
npm run dev
```

**ç»ˆç«¯ 2 - å‰ç«¯ï¼š**
```bash
cd chiavow/client
npm run dev
```

### æµ‹è¯•ç™»å½•

1. æ‰“å¼€æµè§ˆå™¨ï¼šhttp://localhost:3000
2. è¾“å…¥é‚®ç®±ï¼šä¾‹å¦‚ `test@example.com`
3. ç‚¹å‡» "Send Code"
4. æŸ¥çœ‹åç«¯æ§åˆ¶å°çš„éªŒè¯ç ï¼ˆæ ¼å¼åŒ–è¾“å‡ºï¼‰ï¼š
   ```
   === VERIFICATION CODE ===
   Email: test@example.com
   Code: 123456
   Expires: 2025-11-13 17:30:00
   =========================
   ```
5. è¾“å…¥éªŒè¯ç ç™»å½•

---

## ğŸ“± å“åº”å¼è®¾è®¡è¯´æ˜

### ç§»åŠ¨ç«¯ï¼ˆ< 768pxï¼‰
- å…¨å±æ˜¾ç¤º
- å®½åº¦ 100%
- èƒŒæ™¯è‰² #F7F7F7

### å¹³æ¿/æ¡Œé¢ï¼ˆ>= 768pxï¼‰
- å±…ä¸­æ˜¾ç¤º
- æœ€å¤§å®½åº¦ 480px
- ç™½è‰²ä¸»ä½“ï¼Œç°è‰²èƒŒæ™¯
- é˜´å½±æ•ˆæœ

### å¤§å±å¹•ï¼ˆ>= 1200pxï¼‰
- å±…ä¸­æ˜¾ç¤º
- æœ€å¤§å®½åº¦ 520px
- æ›´å¤§çš„å¯è§†åŒºåŸŸ

### ç‰¹æ€§
- âœ… å¹³æ»‘æ»šåŠ¨
- âœ… è‡ªå®šä¹‰æ»šåŠ¨æ¡ï¼ˆwebkitï¼‰
- âœ… æŒ‰é’®ç‚¹å‡»åŠ¨ç”»
- âœ… æµç•…çš„è¿‡æ¸¡æ•ˆæœ

---

## ğŸ” æŠ€æœ¯å˜æ›´è¯¦æƒ…

### é‚®ç®±éªŒè¯ vs æ‰‹æœºéªŒè¯

| ç‰¹æ€§ | æ‰‹æœºéªŒè¯ï¼ˆæ—§ï¼‰ | é‚®ç®±éªŒè¯ï¼ˆæ–°ï¼‰ |
|------|--------------|--------------|
| è¾“å…¥æ ¼å¼ | ç”µè¯å·ç  | é‚®ç®±åœ°å€ |
| éªŒè¯æ–¹å¼ | SMS | Email |
| éªŒè¯æ­£åˆ™ | æ—  | `/^[^\s@]+@[^\s@]+\.[^\s@]+$/` |
| å¼€å‘æµ‹è¯• | æ§åˆ¶å°è¾“å‡º | æ§åˆ¶å°æ ¼å¼åŒ–è¾“å‡º |
| ç”Ÿäº§ç¯å¢ƒ | Twilio/é˜¿é‡Œäº‘SMS | SendGrid/AWS SES |
| æˆæœ¬ | è¾ƒé«˜ï¼ˆæ¯æ¡çŸ­ä¿¡æ”¶è´¹ï¼‰ | è¾ƒä½ï¼ˆå¤§é‡å…è´¹é¢åº¦ï¼‰ |

### å¤´åƒç”Ÿæˆ

| ç‰¹æ€§ | Canvasï¼ˆæ—§ï¼‰ | SVGï¼ˆæ–°ï¼‰ |
|------|-------------|----------|
| æ ¼å¼ | PNG | SVG |
| ä¾èµ– | canvasåŒ… + Cairoç³»ç»Ÿåº“ | æ— ä¾èµ– |
| æ–‡ä»¶å¤§å° | è¾ƒå¤§ | å¾ˆå° |
| å¯ä¼¸ç¼©æ€§ | å›ºå®šåˆ†è¾¨ç‡ | æ— é™æ”¾å¤§ä¸å¤±çœŸ |
| å…¼å®¹æ€§ | éœ€è¦ç¼–è¯‘ | çº¯JavaScript |

---

## ğŸ”§ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸï¼ˆç«‹å³å¯åšï¼‰
- [ ] é›†æˆçœŸå®çš„é‚®ä»¶æœåŠ¡ï¼ˆSendGrid/AWS SESï¼‰
- [ ] æ·»åŠ é‚®ç®±éªŒè¯é“¾æ¥ï¼ˆå¯é€‰ï¼‰
- [ ] ä¼˜åŒ–é”™è¯¯æç¤ºä¿¡æ¯
- [ ] æ·»åŠ åŠ è½½åŠ¨ç”»

### ä¸­æœŸï¼ˆ1-2å‘¨ï¼‰
- [ ] é›†æˆçœŸå®æ•°æ®åº“
- [ ] æ·»åŠ ç”¨æˆ·é‚®ç®±éªŒè¯çŠ¶æ€
- [ ] å®ç°å¯†ç ç™»å½•ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰
- [ ] æ·»åŠ "è®°ä½æˆ‘"åŠŸèƒ½

### é•¿æœŸï¼ˆ1ä¸ªæœˆ+ï¼‰
- [ ] OAuth ç™»å½•ï¼ˆGoogle/Facebookï¼‰
- [ ] åŒå› ç´ è®¤è¯
- [ ] é‚®ä»¶é€šçŸ¥ç³»ç»Ÿ
- [ ] ç”¨æˆ·æ´»åŠ¨æ—¥å¿—

---

## ğŸ“§ é‚®ä»¶æœåŠ¡é›†æˆç¤ºä¾‹

### SendGridï¼ˆæ¨èï¼‰

```typescript
// server/src/utils/emailService.ts
import sgMail from '@sendgrid/mail'

sgMail.setApiKey(process.env.SENDGRID_API_KEY!)

export const sendVerificationEmail = async (email: string, code: string) => {
  const msg = {
    to: email,
    from: 'noreply@chiavow.com',
    subject: 'Your Chiavow Verification Code',
    text: `Your verification code is: ${code}`,
    html: `
      <h2>Welcome to Chiavow!</h2>
      <p>Your verification code is:</p>
      <h1 style="color: #FF6B6B; font-size: 32px;">${code}</h1>
      <p>This code will expire in 10 minutes.</p>
    `
  }

  await sgMail.send(msg)
}
```

### AWS SES

```typescript
import AWS from 'aws-sdk'

const ses = new AWS.SES({ region: 'us-east-1' })

export const sendVerificationEmail = async (email: string, code: string) => {
  const params = {
    Source: 'noreply@chiavow.com',
    Destination: { ToAddresses: [email] },
    Message: {
      Subject: { Data: 'Your Chiavow Verification Code' },
      Body: {
        Html: { Data: `Your code: <strong>${code}</strong>` }
      }
    }
  }

  await ses.sendEmail(params).promise()
}
```

---

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] é‚®ç®±è¾“å…¥éªŒè¯å·¥ä½œæ­£å¸¸
- [ ] éªŒè¯ç å‘é€æˆåŠŸï¼ˆæ§åˆ¶å°å¯è§ï¼‰
- [ ] éªŒè¯ç éªŒè¯æ­£ç¡®
- [ ] ç™»å½•ååˆ›å»ºæ–°ç”¨æˆ·
- [ ] SVG å¤´åƒç”Ÿæˆæ­£ç¡®
- [ ] ä¸ªäººèµ„æ–™é¡µæ˜¾ç¤ºé‚®ç®±
- [ ] ç§»åŠ¨ç«¯å“åº”å¼æ­£å¸¸
- [ ] PCç«¯å±…ä¸­æ˜¾ç¤ºæ­£å¸¸
- [ ] å¹³æ»‘æ»šåŠ¨å·¥ä½œ
- [ ] æŒ‰é’®åŠ¨ç”»æµç•…

---

## ğŸ› å¸¸è§é—®é¢˜

### Q: éªŒè¯ç åœ¨å“ªé‡ŒæŸ¥çœ‹ï¼Ÿ
A: åç«¯æ§åˆ¶å°ä¼šæ˜¾ç¤ºæ ¼å¼åŒ–çš„éªŒè¯ç ä¿¡æ¯ã€‚

### Q: ä¸ºä»€ä¹ˆè¦æ”¹ç”¨é‚®ç®±ï¼Ÿ
A: é‚®ç®±éªŒè¯æˆæœ¬æ›´ä½ï¼Œæ›´é€‚åˆå¼€å‘æµ‹è¯•ï¼Œä¸”å¤§å¤šæ•°ç”¨æˆ·éƒ½æœ‰é‚®ç®±ã€‚

### Q: å¦‚ä½•é›†æˆçœŸå®çš„é‚®ä»¶æœåŠ¡ï¼Ÿ
A: å‚è€ƒä¸Šé¢çš„ SendGrid æˆ– AWS SES ç¤ºä¾‹ä»£ç ã€‚

### Q: PCç«¯æ˜¾ç¤ºæœ‰é—®é¢˜ï¼Ÿ
A: ç¡®ä¿æµè§ˆå™¨çª—å£å®½åº¦ >= 768pxï¼Œåº”è¯¥è‡ªåŠ¨å±…ä¸­æ˜¾ç¤ºã€‚

### Q: SVG å¤´åƒèƒ½æ”¹å› PNG å—ï¼Ÿ
A: å¯ä»¥ï¼Œä½†éœ€è¦é‡æ–°å®‰è£… canvas åŒ…å’Œç³»ç»Ÿä¾èµ–ã€‚ä¸å»ºè®®ã€‚

---

**æ›´æ–°å®Œæˆï¼** ğŸ‰

ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨é‚®ç®±ç™»å½•ï¼Œåº”ç”¨å®Œç¾é€‚é…æ‰‹æœºå’ŒPCç«¯ã€‚
