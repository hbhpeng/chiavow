# 🧪 完整测试指南

## 📱 响应式设计说明

### 设计理念
- **登录页面（AuthView）**：全屏显示，PC和移动端都占满整个视口
- **设置页面（ProfileSetupView）**：全屏显示，内容居中（max-width: 400px）
- **主应用（MainView）**：
  - 移动端：全屏显示
  - PC端（>= 768px）：居中显示，最大宽度 480px，灰色背景
  - 大屏幕（>= 1200px）：最大宽度 520px

## 🔧 开始测试前的准备

### 1. 清除旧的登录状态

**快速方法（推荐）：**
1. 打开浏览器控制台（F12）
2. 在 Console 标签输入：
   ```javascript
   localStorage.clear()
   location.reload()
   ```

详细方法请查看：[清除登录状态.md](./清除登录状态.md)

### 2. 确保前后端都在运行

**后端（终端1）：**
```bash
cd /Users/xinguanliyuan/Desktop/indoor_chart/chiavow/server
npm run dev
```

**前端（终端2）：**
```bash
cd /Users/xinguanliyuan/Desktop/indoor_chart/chiavow/client
npm run dev
```

## 📋 完整测试流程

### 测试1：登录页面

1. **访问应用**
   - URL: http://localhost:3000
   - 应该自动显示登录页面

2. **PC端测试**
   - 页面应该全屏显示
   - 登录卡片居中，背景渐变色
   - 宽度响应式：窗口变化时卡片保持居中

3. **输入邮箱**
   - 输入：`test@chiavow.com`
   - 或任意有效邮箱格式
   - 测试错误格式：`test` 或 `test@` 应该显示错误

4. **发送验证码**
   - 点击"Send Code"按钮
   - 按钮应该变成倒计时（60s, 59s, ...）
   - 后端控制台应该显示：
     ```
     === VERIFICATION CODE ===
     Email: test@chiavow.com
     Code: 123456
     Expires: 2025-11-13 17:30:00
     =========================
     ```

5. **输入验证码**
   - 复制控制台中的6位数字
   - 输入验证码
   - 点击"Login"

6. **自动跳转**
   - 首次登录：应跳转到设置页面
   - 已设置过：应跳转到主应用

### 测试2：资料设置页面

1. **页面显示**
   - PC端：全屏显示，设置卡片居中
   - 标题："Set Up Your Profile"

2. **上传头像（可选）**
   - 点击相机图标
   - 选择图片文件
   - 预览应该立即显示

3. **填写信息**
   - 用户名（必填）：`张三` 或 `John`
   - 首选语言（必填）：选择 `English` 或 `中文`
   - 次选语言（可选）：可以不选

4. **点击Start**
   - 如果没有上传头像，应该自动生成 SVG 头像
   - 应该跳转到主应用（Guide-hailing 页面）

### 测试3：主应用 - Guide-hailing

1. **PC端响应式**
   - 应用应该居中显示（max-width: 480px）
   - 两侧有灰色背景
   - 底部导航栏也居中对齐

2. **创建行程**
   - 选择城市：Beijing, Shanghai 等
   - 选择日期：开始和结束日期
   - 点击"+"号：添加更多行程（最多可见3-4个）

3. **设置选项**
   - 旅行者人数：输入 1-5
   - 勾选"Supply vehicles"
   - 勾选"Free itinerary"
   - 勾选"Tailor-made travel"

4. **提交订单**
   - 点击"Match Guide"按钮
   - 应该自动跳转到 Orders 页面

### 测试4：主应用 - Orders

1. **查看订单**
   - 应该看到刚创建的订单
   - 默认在"Active"标签

2. **订单信息**
   - 显示订单号（前8位）
   - 显示行程信息（城市、日期）
   - 显示旅行者人数
   - 显示已选服务（图标）
   - 显示总金额

3. **操作订单**
   - 点击"Cancel"：订单移到"Cancelled"标签
   - 点击"Pay"：订单移到"Paid"标签

4. **切换标签**
   - Active：进行中的订单
   - Paid：已支付的订单
   - Cancelled：已取消的订单

### 测试5：主应用 - Profile

1. **个人资料**
   - 显示头像（上传的或自动生成的）
   - 显示用户名
   - 显示邮箱地址
   - 显示首选语言
   - 显示次选语言（如果有）

2. **语言切换**
   - 点击"中文"：界面切换为中文
   - 点击"English"：界面切换为英文
   - 切换应该立即生效

3. **退出登录**
   - 点击"Logout"按钮
   - 确认对话框
   - 应该清除 token 并跳转到登录页面

## 🎨 响应式测试

### 移动端（< 768px）

**如何测试：**
1. 浏览器按 F12 打开开发者工具
2. 点击设备模拟图标（或按 Ctrl+Shift+M）
3. 选择"iPhone 12 Pro"或"Pixel 5"

**预期效果：**
- ✅ 所有页面全屏显示
- ✅ 底部导航栏占满宽度
- ✅ 按钮和输入框触摸友好（高度足够）
- ✅ 文字大小合适，易于阅读

### 平板端（768px - 1199px）

**如何测试：**
1. 开发者工具
2. 选择"iPad"或"iPad Mini"

**预期效果：**
- ✅ 主应用居中显示（480px宽）
- ✅ 两侧灰色背景
- ✅ 底部导航栏对齐主应用
- ✅ 登录页面保持全屏

### PC端（>= 1200px）

**如何测试：**
1. 正常桌面浏览器窗口
2. 最大化浏览器

**预期效果：**
- ✅ 主应用居中显示（520px宽）
- ✅ 两侧灰色背景更宽
- ✅ 滚动条优化（细窄，圆角）
- ✅ 鼠标悬停效果流畅

## 🐛 常见问题排查

### 问题1：停留在设置页面
**原因**：之前的登录状态保存在 localStorage
**解决**：清除 localStorage（见上方"清除旧的登录状态"）

### 问题2：PC端没有居中
**检查**：
1. 确保你在主应用页面（有底部导航栏）
2. 浏览器宽度 >= 768px
3. 刷新页面（Ctrl+R 或 F5）

### 问题3：验证码收不到
**检查**：
1. 后端是否正在运行？
2. 查看后端控制台输出
3. 邮箱格式是否正确？

### 问题4：头像不显示
**检查**：
1. 如果是上传的头像：检查后端 uploads 目录
2. 如果是自动生成的：应该是 SVG，直接显示文字

### 问题5：底部导航栏没对齐
**检查**：
1. 确保在主应用页面（/main/...）
2. 检查浏览器宽度
3. 清除缓存重新加载

## ✅ 测试检查清单

### 功能测试
- [ ] 邮箱格式验证工作正常
- [ ] 验证码发送和验证正确
- [ ] 首次登录跳转到设置页面
- [ ] 资料设置保存成功
- [ ] SVG头像自动生成
- [ ] 创建订单成功
- [ ] 订单状态切换正常
- [ ] 语言切换立即生效
- [ ] 退出登录清除状态

### 响应式测试
- [ ] 移动端全屏显示
- [ ] 平板端主应用居中（480px）
- [ ] PC端主应用居中（520px）
- [ ] 登录页面在各端都全屏
- [ ] 底部导航栏正确对齐
- [ ] 按钮点击动画流畅
- [ ] 滚动条样式正确

### 视觉测试
- [ ] 颜色搭配和谐
- [ ] 字体大小合适
- [ ] 间距舒适
- [ ] 阴影效果自然
- [ ] 动画过渡流畅
- [ ] 错误提示清晰

## 🎯 性能检查

1. **网络面板（F12 → Network）**
   - API 请求是否快速响应？
   - 图片是否正确加载？

2. **控制台（F12 → Console）**
   - 是否有错误或警告？

3. **移动端性能**
   - 滚动是否流畅？
   - 动画是否卡顿？

---

**测试完成后，请报告：**
1. 哪些功能正常工作 ✅
2. 哪些功能有问题 ❌
3. 具体的错误信息
4. 浏览器和设备信息
